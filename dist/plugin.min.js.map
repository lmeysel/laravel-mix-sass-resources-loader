{"version":3,"sources":["../src/plugin.js"],"names":[],"mappings":"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","file":"plugin.min.js","sourcesContent":["const mix = require('laravel-mix');\nconst path = require('path');\nconst fs = require('fs');\n\nlet mix4 = true;\nfs.readFile(path.resolve(process.cwd(), 'node_modules/laravel-mix/package.json'), { encoding: 'utf8' }, (err, data) => {\n\tconst v = JSON.parse(data)['version'];\n\tmix4 = /^4\\./.test(v);\n});\n\nconst ext = new class {\n\tregister(...args) {\n\t\tif (!this.resources) this.resources = [];\n\t\targs.forEach(a => a instanceof Array ?\n\t\t\tthis.resources.push.apply(this.resources, a.map(r => path.resolve(process.cwd(), r))) :\n\t\t\tthis.resources.push(path.resolve(process.cwd(), a)));\n\t}\n\tdependencies() { return ['sass-resources-loader']; }\n\n\twebpackConfig(config) {\n\t\tconst rules = config.module.rules.filter(rule =>\n\t\t\t((rule.test instanceof RegExp) && rule.test.test('asdf.scss'))\n\t\t\t|| (typeof (rule.test) === 'string' && /\\.s[ac]ss$/.test(rule.test)));\n\n\t\tconst ldr = { loader: 'sass-resources-loader', options: { resources: this.resources } };\n\t\tif (mix4) {\n\t\t\trules.forEach(rule => {\n\t\t\t\tif (rule.loaders) {\n\t\t\t\t\trule.use = rule.loaders;\n\t\t\t\t\tdelete rule.loaders;\n\t\t\t\t}\n\t\t\t\trule.use.push(ldr)\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\trules.forEach(rule => {\n\t\t\t\tif (rule.loaders) {\n\t\t\t\t\trule.use = rule.loaders.map(loader => ({ loader }));\n\t\t\t\t\tdelete rule.loaders;\n\t\t\t\t}\n\t\t\t\trule.use.push(ldr)\n\t\t\t});\n\t\t\t// vue loader\n\t\t\tconst rule = config.module.rules.find(rule => (rule.test instanceof RegExp && rule.test.test('asdf.vue')));\n\t\t\t['sass', 'scss'].forEach(st => {\n\t\t\t\tif (!rule.options.loaders[st])\n\t\t\t\t\trule.options.loaders[st] = ['style-loader', 'css-loader', 'sass-loader', ldr];\n\t\t\t\telse rule.options.loaders[st].push(ldr);\n\t\t\t});\n\n\t\t}\n\t}\n}();\n\nmix.extend('sassResources', ext);"]}