{"version":3,"sources":["../src/plugin.js"],"names":[],"mappings":"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","file":"plugin.js","sourcesContent":["const mix = require('laravel-mix'),\n\tpath = require('path'),\n\tfs = require('fs');\n\nlet mixVersion = 0, sassVersion = 0;\n(function () {\n\tconst mixPackage = require('laravel-mix/package.json');\n\tmixVersion = parseInt(mixPackage['version'].match(/^(\\d+)\\./)[1]);\n\n\ttry {\n\t\trequire.resolve('sass-loader/package.json');\n\t} catch (x) {\n\t\tthrow new Error('Cannot determine sass-loader\\'s version');\n\t}\n\tconst sassPackage = require('sass-loader/package.json');\n\tsassVersion = parseInt(sassPackage['version'].match(/^(\\d+)\\./)[1]);\n})();\n\nconst ext = new class {\n\tregister(...args) {\n\t\tif (!this.resources) this.resources = [];\n\t\targs.forEach(a => a instanceof Array ?\n\t\t\tthis.resources.push.apply(this.resources, a.map(r => path.resolve(process.cwd(), r))) :\n\t\t\tthis.resources.push(path.resolve(process.cwd(), a)));\n\n\t\t// if (mixVersion >= 6 && this.resources.length > 1)\n\t\t// \tconsole.warn('laravel-mix-sass-resources-loader can only handle one resource file as of laravel-mix@6');\n\t}\n\tdependencies() { return mixVersion >= 6 ? null : ['sass-resources-loader']; }\n\n\twebpackConfig(config) {\n\t\tconst rules = config.module.rules.filter(rule =>\n\t\t\t((rule.test instanceof RegExp) && rule.test.test('asdf.scss'))\n\t\t\t|| (typeof (rule.test) === 'string' && /\\.s[ac]ss$/.test(rule.test)));\n\n\t\tconst ldr = { loader: 'sass-resources-loader', options: { resources: this.resources } };\n\t\tif (mixVersion <= 5) {\n\t\t\trules.forEach(rule => {\n\t\t\t\tif (rule.loaders) {\n\t\t\t\t\trule.use = rule.loaders;\n\t\t\t\t\tdelete rule.loaders;\n\t\t\t\t}\n\t\t\t\trule.use.push(ldr)\n\t\t\t});\n\t\t}\n\t\tif (mixVersion >= 6) {\n\t\t\tconst injectionKey = sassVersion <= 8 ? 'prependData' : 'additionalData';\n\t\t\tconst prepend = this.resources.map(r => `@import '${r.replace(/\\\\/g, '/')}';`).join('\\n');\n\t\t\tconst modify = loader => {\n\t\t\t\tif (typeof loader == 'string') {\n\t\t\t\t\tconst obj = { loader, options: {} };\n\t\t\t\t\tobj.options[injectionKey] = prepend;\n\t\t\t\t\treturn obj;\n\t\t\t\t} else if (typeof loader === 'object') {\n\t\t\t\t\tconst obj = loader.options || {};\n\t\t\t\t\tobj[injectionKey] = prepend;\n\t\t\t\t\tloader.options = obj;\n\t\t\t\t\treturn loader;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst injectRule = use => {\n\t\t\t\tconst i = use.findIndex(l => l == 'sass-loader' || l.loader == 'sass-loader');\n\t\t\t\tif (i !== -1)\n\t\t\t\t\tuse[i] = modify(use[i]);\n\n\t\t\t}\n\t\t\trules.forEach(rule => {\n\t\t\t\tif (rule.use)\n\t\t\t\t\tinjectRule(rule.use instanceof Array ? rule.use : [rule.use]);\n\t\t\t\telse if (rule.oneOf)\n\t\t\t\t\trule.oneOf.forEach(oneOf => injectRule(oneOf.use instanceof Array ? oneOf.use : [oneOf.use]));\n\t\t\t});\n\t\t}\n\t\tif (mixVersion == 5) {\n\t\t\t// vue loader\n\t\t\tconst rule = config.module.rules.find(rule => (rule.test instanceof RegExp && rule.test.test('asdf.vue')));\n\t\t\t['sass', 'scss'].forEach(st => {\n\t\t\t\tif (!rule.options.loaders[st])\n\t\t\t\t\trule.options.loaders[st] = ['style-loader', 'css-loader', 'sass-loader', ldr];\n\t\t\t\telse rule.options.loaders[st].push(ldr);\n\t\t\t});\n\n\t\t}\n\t}\n}();\n\nmix.extend('sassResources', ext);"]}